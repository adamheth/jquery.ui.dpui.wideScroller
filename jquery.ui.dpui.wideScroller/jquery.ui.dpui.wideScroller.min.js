(function(a){var b="dpui-ws-active",c="dpui-ws-item";a.widget("ui.wideScroller",{options:{offsetLocatorID:"#locator",containerID:"#scroller-container",loaderID:"#scroller-spinner",nextButtonClass:".next",prevButtonClass:".prev",showItemNumbers:!0,currentItemDisplayClass:".ws-currentItem",totalItemDisplayClass:".ws-totalItems",goToItem:null,easing:"linear",speed:300},_create:function(){var b=this,d=this.options,e=this.element;e.addClass("dpui-widget"),a(window).resize(a.throttle(500,function(){b.resize()})),b._bindControls(),b.itemsLength=a("."+c).length,b.itemsLength<=1&&a(d.prevButtonClass+", "+d.nextButtonClass).hide(),d.goToItem!==null&&b._reOrderItems(),b._initialState=e.html(),b.setItemPosition()},_bindControls:function(){var b=this,c=this.options;a(c.nextButtonClass).bind("click",function(a){b.moveNext(),b._unbindControls(),b._trigger("nextButtonClick",a);return!1}),a(c.prevButtonClass).bind("click",function(a){b.movePrev(),b._unbindControls(),b._trigger("previousButtonClick",a);return!1}),a("#swipe-test").bind("swipeleft",function(a){b.moveNext(),b._unbindControls(),b._trigger("nextButtonClick",a),a.stopPropagation()}),a("#swipe-test").bind("swiperight",function(a){b.movePrev(),b._unbindControls(),b._trigger("previousButtonClick",a),a.stopPropagation()})},_unbindControls:function(){var b=this.options;a(b.prevButtonClass+","+b.nextButtonClass+",#swipe-test").unbind()},_reOrderItems:function(){var d=this.options,e=a("."+c);e.removeClass(b),a(e[d.goToItem-1]).addClass(b);for(var f=0;f<d.goToItem-1;f++)a(e[f]).detach().appendTo(d.containerID);e=null},setItemPosition:function(){var b=this,d=this.options,e=a(d.offsetLocatorID).offset(),f=a(window).width(),g=a("."+c),h=0,i=0,j=[],k=0;a.each(g,function(){h===0?(a(this).css("left",e.left),h=a(this).outerWidth()):h+e.left<f?(a(this).css("left",h+e.left),h+=a(this).outerWidth()):(j[k]=this,k++)}),j.reverse(),a.each(j,function(){i+=a(this).outerWidth(),a(this).css("left",e.left-i).prependTo(d.containerID)}),b._updateItemNumber(),b.hideLoader()},moveNext:function(){var d=this,e=this.options,f=this.element,g=a(window).width(),h=a("."+c),i=a("."+c).length,j=f.find("."+b),k=0;d._highlightItem("next");var l=a(h).last(),m=l.offset();d.swappedElement=a(h).first(),a("<div></div>").html(d.swappedElement.html()).addClass(c).css("left",l.outerWidth()+m.left).appendTo(e.containerID),l=a("."+c).last(),k=parseInt(l.css("left"),10)+l.outerWidth()-j.outerWidth();if(k<g){var n=0;while(k<=g)n++,a(h[n]).css("left",l.outerWidth()+l.offset().left).detach().appendTo(e.containerID),k+=a(h[n]).outerWidth(),l=a(h[n])}var o=j.outerWidth()+"px";d._scroll("next",o,function(){d._scrollOnComplete("next")})},movePrev:function(){var d=this,e=this.options,f=this.element,g=a(window).width(),h=a("."+c),i=f.find("."+b);d.shortClass="",d.nextItem="",d._highlightItem("prev");var j=a("."+c).last(),k=parseInt(j.css("left"),10)+j.outerWidth()-i.outerWidth();if(j.offset().left+d.nextItem.outerWidth()>g){var l=a(h).first(),m=l.offset();d.swappedElement=a(h).last(),a("<div></div>").html(d.swappedElement.html()).addClass(c+" "+d.shortClass).css("left",m.left-d.swappedElement.outerWidth()).prependTo(e.containerID)}var n=d.nextItem.outerWidth()+"px";d._scroll("prev",n,function(){d._scrollOnComplete("prev")})},_scroll:function(b,d,e){var f=this,g=this.options,h=this.element,i=0;f._trigger("startScroll");switch(b){case"next":a("."+c).animate({left:"-="+d},g.speed,g.easing,function(){i++,i>=a("."+c).length&&e()});break;case"prev":a("."+c).animate({left:"+="+d},g.speed,g.easing,function(){i++,i>=a("."+c).length&&e()});break;default:}},_scrollOnComplete:function(a){var b=this,c=this.options;b.swappedElement&&(b.swappedElement.remove(),b.swappedElement=null),b._bindControls(),b._updateItemNumber(a),b._trigger("stopScroll")},_highlightItem:function(d){var e=this,f=this.options,g=this.element,h=g.find("."+b);d==="next"?e.nextItem=h.next():h.prev().length!==0?e.nextItem=h.prev():(e.nextItem=a("."+c).last(),e.shortClass=b),h.removeClass(b),e.nextItem.addClass(b)},_updateItemNumber:function(b){var c=this,d=this.options,e=this.element;if(d.showItemNumbers){var f=parseInt(a(d.currentItemDisplayClass).html(),10);a(d.totalItemDisplayClass).html(c.itemsLength);switch(b){case"next":f<c.itemsLength?f++:f=1,a(d.currentItemDisplayClass).html(f);break;case"prev":f>1?f--:f=c.itemsLength,a(d.currentItemDisplayClass).html(f);break;default:a(d.currentItemDisplayClass).html("1")}}},resize:function(){var a=this,b=this.options,c=this.element;c.html(a._initialState),a.setItemPosition(),a._trigger("resize")},hideLoader:function(){var b=this,c=this.options;c.loaderID!==null&&setTimeout(function(){a(c.loaderID).fadeOut()},800)},showLoader:function(){var b=this,c=this.options;c.loaderID!==null&&setTimeout(function(){a(c.loaderID).fadeIn()},800)},destroy:function(){var b=this,d=this.options,e=this.element;e.removeClass("rid-widget"),a(d.nextButtonClass).unbind("click"),a(d.prevButtonClass).unbind("click"),b.hideLoader(),e.html(b._initialState),a("."+c).css("left","0"),a.Widget.prototype.destroy.apply(this,arguments);return this}})})(jQuery)