(function(c){var a="dpui-ws-active",b="dpui-ws-item";c.widget("ui.wideScroller",{options:{offsetLocatorID:"#locator",containerID:"#scroller-container",loaderID:"#scroller-spinner",nextButtonClass:".next",prevButtonClass:".prev",showItemNumbers:true,currentItemDisplayClass:".ws-currentItem",totalItemDisplayClass:".ws-totalItems",goToItem:null,easing:"linear",speed:300},_create:function(){var d=this,g=this.options,f=this.element;f.addClass("dpui-widget");c(window).resize(c.throttle(500,function(){d.resize()}));d._bindControls();d.itemsLength=c("."+b).length;if(d.itemsLength<=1){c(g.prevButtonClass+", "+g.nextButtonClass).hide()}if(g.goToItem!==null){d._reOrderItems()}d._initialState=f.html();d.setItemPosition()},_bindControls:function(){var d=this,e=this.options;c(e.nextButtonClass).bind("click",function(f){d.moveNext();d._unbindControls();d._trigger("nextButtonClick",f);return false});c(e.prevButtonClass).bind("click",function(f){d.movePrev();d._unbindControls();d._trigger("previousButtonClick",f);return false})},_unbindControls:function(){var d=this.options;c(d.prevButtonClass+","+d.nextButtonClass).unbind()},_reOrderItems:function(){var f=this.options,d=c("."+b);d.removeClass(a);c(d[f.goToItem-1]).addClass(a);for(var e=0;e<(f.goToItem-1);e++){c(d[e]).detach().appendTo(f.containerID)}d=null},setItemPosition:function(){var l=this,e=this.options,h=c(e.offsetLocatorID).offset(),f=c(window).width(),k=c("."+b),j=0,g=0,d=[],i=0;c.each(k,function(){if(j===0){c(this).css("left",h.left);j=c(this).outerWidth()}else{if((j+h.left)>=f){d[i]=this;i++}else{c(this).css("left",(j+h.left));j+=c(this).outerWidth()}}});d.reverse();c.each(d,function(){g+=c(this).outerWidth();c(this).css("left",(h.left-g)).prependTo(e.containerID)});l._updateItemNumber();l.hideLoader()},moveNext:function(){var q=this,d=this.options,m=this.element,f=c(window).width(),n=c("."+b),r=c("."+b).length,j=m.find("."+a),l=0;q._highlightItem("next");var p=c(n).last();var g=p.offset();q.swappedElement=c(n).first();c("<div></div>").html(q.swappedElement.html()).addClass(b).css("left",(p.outerWidth()+g.left)).appendTo(d.containerID);p=c("."+b).last();l=(parseInt(p.css("left"),10)+p.outerWidth())-j.outerWidth();if(l<f){var h=0;while(l<=f){h++;c(n[h]).css("left",(p.outerWidth()+p.offset().left)).detach().appendTo(d.containerID);l+=c(n[h]).outerWidth();p=c(n[h])}}var k=j.outerWidth()+"px";q._scroll("next",k,function(){q._scrollOnComplete("next")})},movePrev:function(){var p=this,d=this.options,k=this.element,f=c(window).width(),l=c("."+b),h=k.find("."+a);p.shortClass="";p.nextItem="";p._highlightItem("prev");var n=c("."+b).last();var j=(parseInt(n.css("left"),10)+n.outerWidth())-h.outerWidth();if(n.offset().left+p.nextItem.outerWidth()>f){var m=c(l).first();var g=m.offset();p.swappedElement=c(l).last();c("<div></div>").html(p.swappedElement.html()).addClass(b+" "+p.shortClass).css("left",(g.left-p.swappedElement.outerWidth())).prependTo(d.containerID)}var i=p.nextItem.outerWidth()+"px";p._scroll("prev",i,function(){p._scrollOnComplete("prev")})},_scroll:function(h,k,j){var d=this,i=this.options,g=this.element,f=0;d._trigger("startScroll");switch(h){case"next":c("."+b).animate({left:"-="+k},i.speed,i.easing,function(){f++;if(f>=c("."+b).length){j()}});break;case"prev":c("."+b).animate({left:"+="+k},i.speed,i.easing,function(){f++;if(f>=c("."+b).length){j()}});break;default:break}},_scrollOnComplete:function(e){var d=this,f=this.options;if(d.swappedElement){d.swappedElement.remove();d.swappedElement=null}d._bindControls();d._updateItemNumber(e);d._trigger("stopScroll")},_highlightItem:function(g){var d=this,i=this.options,f=this.element,h=f.find("."+a);if(g==="next"){d.nextItem=h.next()}else{if(h.prev().length!==0){d.nextItem=h.prev()}else{d.nextItem=c("."+b).last();d.shortClass=a}}h.removeClass(a);d.nextItem.addClass(a)},_updateItemNumber:function(h){var d=this,i=this.options,g=this.element;if(i.showItemNumbers){var f=parseInt(c(i.currentItemDisplayClass).html(),10);c(i.totalItemDisplayClass).html(d.itemsLength);switch(h){case"next":if(f<d.itemsLength){f++}else{f=1}c(i.currentItemDisplayClass).html(f);break;case"prev":if(f>1){f--}else{f=d.itemsLength}c(i.currentItemDisplayClass).html(f);break;default:c(i.currentItemDisplayClass).html("1");break}}},resize:function(){var d=this,g=this.options,f=this.element;f.html(d._initialState);d.setItemPosition();d._trigger("resize")},hideLoader:function(){var d=this,e=this.options;if(e.loaderID!==null){setTimeout(function(){c(e.loaderID).fadeOut()},800)}},showLoader:function(){var d=this,e=this.options;if(e.loaderID!==null){setTimeout(function(){c(e.loaderID).fadeIn()},800)}},destroy:function(){var d=this,g=this.options,f=this.element;f.removeClass("rid-widget");c(g.nextButtonClass).unbind("click");c(g.prevButtonClass).unbind("click");d.hideLoader();f.html(d._initialState);c("."+b).css("left","0");c.Widget.prototype.destroy.apply(this,arguments);return this}})})(jQuery);